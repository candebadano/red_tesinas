<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Clústeres Temáticos - Tesinas de Turismo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e3a8a; /* Azul oscuro */
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .stat-label {
            font-weight: 500;
            color: #475569;
        }
        .stat-value {
            font-weight: 600;
            color: #1f2937;
            font-size: 1.25rem;
        }
        #cluster-selector {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23475569%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22/%3E%3C/svg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 0.65em auto;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Encabezado -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800">Análisis de Clústeres Temáticos: Tesinas de Turismo (DGyT-UNS)</h1>
            <p class="text-slate-600 mt-2">Caracterización y evolución de los 5 clústeres temáticos (2009-2024)</p>
        </header>

        <!-- Selector de Clúster -->
        <div class="mb-8">
            <label for="cluster-selector" class="block text-lg font-medium text-slate-700 mb-2">Seleccione un Clúster Temático:</label>
            <select id="cluster-selector" class="w-full p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                <!-- Opciones se agregarán dinámicamente con JS -->
            </select>
        </div>

        <!-- Contenedor del Tablero -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Columna Izquierda: Resumen y Foco -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Card: Resumen General -->
                <div class="card p-6">
                    <h2 id="summary-title" class="card-title">Resumen General</h2>
                    <div class="space-y-4">
                        <div>
                            <p class="stat-label">Total de Tesinas (Aprox.)</p>
                            <p id="total-tesis" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Porcentaje del Total</p>
                            <p id="total-percentage" class="stat-value">--</p>
                        </div>
                    </div>
                </div>

                <!-- Card: Foco Principal -->
                <div class="card p-6">
                    <h2 class="card-title">Características Principales</h2>
                    <div class="space-y-4">
                        <div>
                            <p class="stat-label">Director/a Destacado/a</p>
                            <p id="directors" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Orientación Académica</p>
                            <p id="study-plan" class="stat-value">--</p>
                        </div>
                         <div>
                            <p class="stat-label">Provincia de Estudio</p>
                            <p id="geo-area" class="stat-value">--</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Columna Central: Gráfico -->
            <div class="lg:col-span-2 space-y-6">
                <div class="card p-6">
                    <h2 class="card-title">Productividad por Año</h2>
                    <div class="h-80 md:h-96">
                        <canvas id="productivity-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Fila Inferior: Metodología -->
            <div class="lg:col-span-3">
                <div class="card p-6">
                    <h2 class="card-title">Perfil Metodológico de la Investigación</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                        <div>
                            <p class="stat-label">Enfoque Metodológico</p>
                            <p id="method-approach" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Alcance de Investigación</p>
                            <p id="method-scope" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Técnica de Recolección de Datos</p>
                            <p id="method-technique" class="stat-value">--</p>
                        </div>
                    </div>
                </div>
            </div>

        </main>
        
        <footer class="text-center mt-8 text-slate-500 text-sm">
            <p>Resultados correspondientes al trabajo final de carrera de la Especialización en Big Data y Análisis de Datos Estratégicos - UCASAL</p>
            <p>© 2025 - “Un viaje por la producción académica universitaria: Tesinas de la Licenciatura en Turismo del Departamento de Geografía y Turismo de la Universidad Nacional del Sur, provincia de Buenos Aires”</p>
        </footer>
    </div>

    <script>
        // --- BASE DE DATOS ---
        // Datos extraídos y procesados de las tablas de Clústeres (página 5 del documento Word).
        const clusterData = [
            {
                id: 0,
                name: "Clúster 0",
                total: 64,
                percentage: "29%",
                directors: "Rodríguez, C. (16%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (42%)",
                geoArea: "Buenos Aires (78%)",
                methodApproach: "Mixto (69%)",
                scope: "Exploratorio-descriptivo (44%)",
                technique: "Entrevista y encuesta (17%)",
                productivity: {2013:1, 2014:8, 2015:6, 2016:2, 2017:4, 2018:9, 2019:7, 2020:9, 2021:3, 2022:5, 2023:2, 2024:8}
            },
            {
                id: 1,
                name: "Clúster 1",
                total: 22,
                percentage: "10%",
                directors: "Haag, M. I. (17%)",
                studyPlan: "Plan. de Recursos Turísticos y Medio Ambiente (44%)",
                geoArea: "Buenos Aires (85%)",
                methodApproach: "Mixto (65%)",
                scope: "Exploratorio-descriptivo (62%)",
                technique: "Entrevista y encuesta (26%)",
                productivity: {2013:1, 2014:5, 2015:4, 2016:3, 2017:4, 2018:1, 2019:1, 2021:2, 2023:1}
            },
            {
                id: 2,
                name: "Clúster 2",
                total: 33,
                percentage: "15%",
                directors: "Gil, Va. (21%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (62%)",
                geoArea: "Buenos Aires (90%)",
                methodApproach: "Mixto (62%)",
                scope: "Exploratorio-descriptivo (56%)",
                technique: "Entrevista y encuesta; Entrevista (18%)",
                productivity: {2009:1, 2012:1, 2013:1, 2014:3, 2015:2, 2016:3, 2017:3, 2018:4, 2019:4, 2020:4, 2021:3, 2022:3, 2024:2}
            },
            {
                id: 3,
                name: "Clúster 3",
                total: 69,
                percentage: "31%",
                directors: "Haag, M. I. (16%)",
                studyPlan: "Plan. de Recursos Turísticos y Medio Ambiente (35%)",
                geoArea: "Buenos Aires (77%)",
                methodApproach: "Mixto (64%)",
                scope: "Exploratorio-descriptivo (44%)",
                technique: "Entrevista y encuesta (17%)",
                productivity: {2011:1, 2012:1, 2013:2, 2014:12, 2015:7, 2016:14, 2017:4, 2018:6, 2019:7, 2020:4, 2021:5, 2022:3, 2024:3}
            },
            {
                id: 4,
                name: "Clúster 4",
                total: 31,
                percentage: "14%",
                directors: "Haag, M. I. (16%)",
                studyPlan: "Empresas Turísticas; Recursos Turísticos (28%)",
                geoArea: "Buenos Aires (65%)",
                methodApproach: "Mixto (66%)",
                scope: "Exploratorio-descriptivo (41%)",
                technique: "Entrevista y encuesta (19%)",
                productivity: {2010:1, 2013:1, 2014:5, 2015:5, 2016:4, 2017:4, 2018:1, 2019:3, 2020:1, 2021:1, 2022:2, 2023:2, 2024:2}
            }
        ];

        // --- LÓGICA DEL TABLERO ---
        document.addEventListener('DOMContentLoaded', () => {
            const selector = document.getElementById('cluster-selector');
            const summaryTitle = document.getElementById('summary-title');
            const totalTesis = document.getElementById('total-tesis');
            const totalPercentage = document.getElementById('total-percentage');
            const geoArea = document.getElementById('geo-area');
            const directors = document.getElementById('directors');
            const studyPlan = document.getElementById('study-plan');
            const methodApproach = document.getElementById('method-approach');
            const methodScope = document.getElementById('method-scope');
            const methodTechnique = document.getElementById('method-technique');
            
            // --- Lógica para la línea de tendencia ---
            function calculateTrendline(dataPoints) {
                const filteredPoints = dataPoints.filter(p => p.y !== 0);
                if (filteredPoints.length < 2) {
                    return dataPoints.map(() => null); // No se puede calcular la tendencia con menos de 2 puntos
                }

                const n = filteredPoints.length;
                const sumX = filteredPoints.reduce((acc, p) => acc + p.x, 0);
                const sumY = filteredPoints.reduce((acc, p) => acc + p.y, 0);
                const sumXY = filteredPoints.reduce((acc, p) => acc + p.x * p.y, 0);
                const sumX2 = filteredPoints.reduce((acc, p) => acc + p.x * p.x, 0);

                const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                const intercept = (sumY - slope * sumX) / n;
                
                return dataPoints.map(p => slope * p.x + intercept);
            }

            // Inicializar el gráfico de Chart.js
            const chartCtx = document.getElementById('productivity-chart').getContext('2d');
            let productivityChart = new Chart(chartCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Número de Tesinas',
                            data: [],
                            borderColor: '#3b82f6', // Azul
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#3b82f6',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Línea de Tendencia',
                            data: [],
                            borderColor: '#ef4444', // Rojo
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#475569',
                                stepSize: 1
                            },
                            grid: { color: '#e2e8f0' }
                        },
                        x: {
                            ticks: { color: '#475569' },
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1e293b',
                            titleFont: { size: 14 },
                            bodyFont: { size: 12 },
                            padding: 10,
                            cornerRadius: 4,
                            intersect: false,
                            mode: 'index',
                        }
                    }
                }
            });

            // Función para poblar el selector y los datos
            function populateDashboard(clusterId) {
                const data = clusterData.find(item => item.id === clusterId);
                if (!data) return;

                // Actualizar tarjetas de texto
                summaryTitle.textContent = `${data.name} (${data.percentage})`;
                totalTesis.textContent = data.total;
                totalPercentage.textContent = data.percentage;
                geoArea.textContent = data.geoArea;
                directors.textContent = data.directors;
                studyPlan.textContent = data.studyPlan;
                methodApproach.textContent = data.methodApproach;
                methodScope.textContent = data.scope;
                methodTechnique.textContent = data.technique;

                // Actualizar gráfico
                const minYear = 2009;
                const maxYear = 2024;
                const allYears = Array.from({length: maxYear - minYear + 1}, (_, i) => minYear + i);
                
                const chartData = allYears.map(year => data.productivity[year] || 0);
                const dataPointsForTrend = allYears.map((year, index) => ({x: index, y: data.productivity[year] || 0}));
                const trendlineData = calculateTrendline(dataPointsForTrend);

                productivityChart.data.labels = allYears;
                productivityChart.data.datasets[0].data = chartData;
                productivityChart.data.datasets[1].data = trendlineData;
                productivityChart.update();
            }

            // Poblar el selector <select>
            clusterData.forEach(cluster => {
                const option = document.createElement('option');
                option.value = cluster.id;
                option.textContent = `${cluster.name} (${cluster.percentage})`;
                selector.appendChild(option);
            });

            // Event listener para el cambio en el selector
            selector.addEventListener('change', (e) => {
                populateDashboard(parseInt(e.target.value));
            });

            // Cargar datos iniciales (el primer clúster)
            populateDashboard(0);
        });
    </script>
    <h5 style="text-align:center; color:#35414d;">Autora: Lic. Badano María Candela</h5>
</body>
</html>
