<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Líneas Temáticas - Tesinas de Turismo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e3a8a; /* Azul oscuro */
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .stat-label {
            font-weight: 500;
            color: #475569;
        }
        .stat-value {
            font-weight: 600;
            color: #1f2937;
            font-size: 1.25rem;
        }
        #theme-selector {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23475569%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22/%3E%3C/svg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 0.65em auto;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Encabezado -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800">Análisis de las líneas temáticas: Tesinas de la Licenciatura en Turismo (DGyT-UNS)</h1>
            <p class="text-slate-600 mt-2">Caracterización y evolución de las 14 líneas temáticas de investigación (2009-2024)</p>
        </header>

        <!-- Selector de Tema -->
        <div class="mb-8">
            <label for="theme-selector" class="block text-lg font-medium text-slate-700 mb-2">Seleccione una Línea Temática:</label>
            <select id="theme-selector" class="w-full p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                <!-- Opciones se agregarán dinámicamente con JS -->
            </select>
        </div>

        <!-- Contenedor del Tablero -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Columna Izquierda: Resumen y Foco -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Card: Resumen General -->
                <div class="card p-6">
                    <h2 id="summary-title" class="card-title">Resumen General</h2>
                    <div class="space-y-4">
                        <div>
                            <p class="stat-label">Total de Tesinas</p>
                            <p id="total-tesis" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Porcentaje del Total</p>
                            <p id="total-percentage" class="stat-value">--</p>
                        </div>
                    </div>
                </div>

                <!-- Card: Foco Principal -->
                <div class="card p-6">
                    <h2 class="card-title">Características principales</h2>
                    <div class="space-y-4">
                        <div>
                            <p class="stat-label">Director/a Destacado/a</p>
                            <p id="directors" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Orientación Académica</p>
                            <p id="study-plan" class="stat-value">--</p>
                        </div>
                         <div>
                            <p class="stat-label">Provincia de Estudio</p>
                            <p id="geo-area" class="stat-value">--</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Columna Central: Gráfico -->
            <div class="lg:col-span-2 space-y-6">
                <div class="card p-6">
                    <h2 class="card-title">Productividad por Año</h2>
                    <div class="h-80 md:h-96">
                        <canvas id="productivity-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Fila Inferior: Metodología -->
            <div class="lg:col-span-3">
                <div class="card p-6">
                    <h2 class="card-title">Perfil metodológico de la Investigación</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                        <div>
                            <p class="stat-label">Enfoque Metodológico</p>
                            <p id="method-approach" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Alcance de investigación</p>
                            <p id="method-scope" class="stat-value">--</p>
                        </div>
                        <div>
                            <p class="stat-label">Técnica de Recolección de datos</p>
                            <p id="method-technique" class="stat-value">--</p>
                        </div>
                    </div>
                </div>
            </div>

        </main>
        
        <footer class="text-center mt-8 text-slate-500 text-sm">
            <p>Resultados correspondientes al trabajo final de carrera de la Especialización en Big Data y Análisis de Datos estratégico - UCASAL</p>
            <p>© 2025 - “Un viaje por la producción académica universitaria: Tesinas de la Licenciatura en Turismo del Departamento de Geografía y Turismo de la Universidad Nacional del Sur, provincia de Buenos Aires”</p>
        </footer>
    </div>

    <script>
        // --- BASE DE DATOS ---
        // Datos extraídos y procesados de las tablas del documento Word (páginas 27, 28 y 29).
        const thematicData = [
            {
                id: 0,
                name: "Calidad percibida en servicios turísticos",
                total: 9,
                percentage: "4%",
                directors: "Gallucci, S. (29%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (50%)",
                geoArea: "Buenos Aires (78%)",
                methodApproach: "Mixto (56%)",
                scope: "Exploratorio-descriptivo (75%)",
                technique: "Entrevista y encuesta (40%)",
                productivity: {2014:1, 2015:1, 2016:1, 2017:1, 2018:2, 2019:2, 2021:1}
            },
            {
                id: 1,
                name: "Patrimonio cultural y su puesta en valor",
                total: 10,
                percentage: "5%",
                directors: "Haag, M. I. (38%)",
                studyPlan: "Plan. y Gestión Territorial del Turismo (33%)",
                geoArea: "Buenos Aires (78%)",
                methodApproach: "Cualitativo (50%)",
                scope: "Exploratorio-descriptivo (60%)",
                technique: "Entrevista (60%)",
                productivity: {2014:4, 2017:3, 2019:2, 2020:1}
            },
            {
                id: 2,
                name: "Turismo ferroviario y patrimonio urbano",
                total: 11,
                percentage: "5%",
                directors: "Pinassi, A. (38%)",
                studyPlan: "Plan. de Recursos Turísticos y Medio Ambiente (70%)",
                geoArea: "Buenos Aires (90%)",
                methodApproach: "Mixto (64%)",
                scope: "Exploratorio-descriptivo (83%)",
                technique: "Entrevista y encuesta (100%)",
                productivity: {2010:1, 2015:1, 2016:2, 2017:4, 2020:1, 2021:1, 2023:1}
            },
            {
                id: 3,
                name: "Análisis de turismo cultural y patrimonial",
                total: 33,
                percentage: "15%",
                directors: "Fittipaldi, R. (18%)",
                studyPlan: "Plan. y Gestión Territorial del Turismo (33%)",
                geoArea: "Buenos Aires (84%)",
                methodApproach: "Mixto (76%)",
                scope: "Exploratorio-descriptivo (59%)",
                technique: "Entrevista y encuesta (43%)",
                productivity: {2013:1, 2014:6, 2015:2, 2016:3, 2017:1, 2018:4, 2019:3, 2021:1, 2022:1, 2024:1}
            },
            {
                id: 4,
                name: "Revalorización del patrimonio cultural e histórico",
                total: 8,
                percentage: "4%",
                directors: "Larreche, J. I. (100%)",
                studyPlan: "Plan. y Gestión Territorial del Turismo (67%)",
                geoArea: "Buenos Aires (100%)",
                methodApproach: "Mixto (75%)",
                scope: "Exploratorio-descriptivo (63%)",
                technique: "Entrevista y encuesta (57%)",
                productivity: {2014:2, 2015:1, 2016:1, 2019:1, 2021:1, 2024:2}
            },
            {
                id: 5,
                name: "Patrimonio turístico en provincias argentinas",
                total: 12,
                percentage: "5%",
                directors: "Rodríguez, C. (40%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (56%)",
                geoArea: "Buenos Aires (71%)",
                methodApproach: "Mixto; Cualitativo (42%)",
                scope: "Exploratorio-descriptivo (75%)",
                technique: "Entrevista (50%)",
                productivity: {2009:1, 2014:2, 2015:1, 2016:1, 2017:1, 2019:1, 2020:1, 2022:1, 2023:1, 2024:1}
            },
            {
                id: 6,
                name: "Turismo cultural y desarrollo local",
                total: 21,
                percentage: "9%",
                directors: "Pinassi, A. (20%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (41%)",
                geoArea: "Buenos Aires (91%)",
                methodApproach: "Mixto (67%)",
                scope: "Exploratorio-descriptivo (69%)",
                technique: "Entrevista y encuesta (57%)",
                productivity: {2013:1, 2014:1, 2015:2, 2016:3, 2017:1, 2018:3, 2019:1, 2020:2, 2021:1, 2022:1, 2024:2}
            },
            {
                id: 7,
                name: "Turismo y comunicación en ciudades",
                total: 14,
                percentage: "6%",
                directors: "Gallucci, S. (21%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (56%)",
                geoArea: "Buenos Aires (79%)",
                methodApproach: "Mixto (57%)",
                scope: "Exploratorio-descriptivo (58%)",
                technique: "Entrevista y encuesta (50%)",
                productivity: {2012:1, 2014:4, 2015:1, 2016:2, 2017:1, 2019:2, 2020:2, 2024:1}
            },
            {
                id: 8,
                name: "Desarrollo local y análisis de destinos turísticos",
                total: 27,
                percentage: "12%",
                directors: "Gil, Va. (25%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (48%)",
                geoArea: "Buenos Aires (73%)",
                methodApproach: "Mixto (74%)",
                scope: "Exploratorio-descriptivo (58%)",
                technique: "Encuesta (36%)",
                productivity: {2014:5, 2015:3, 2016:3, 2017:1, 2018:1, 2019:2, 2020:2, 2021:2, 2022:1, 2024:2}
            },
            {
                id: 9,
                name: "Turismo alternativo y cicloturismo",
                total: 11,
                percentage: "5%",
                directors: "Haag, M. I. (43%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (63%)",
                geoArea: "Buenos Aires (73%)",
                methodApproach: "Mixto (55%)",
                scope: "Exploratorio-descriptivo (57%)",
                technique: "Entrevista (60%)",
                productivity: {2011:1, 2012:1, 2014:1, 2017:1, 2018:1, 2019:1, 2020:2, 2022:1, 2023:1, 2024:1}
            },
            {
                id: 10,
                name: "Turismo de eventos y destinos costeros",
                total: 11,
                percentage: "5%",
                directors: "Gil, Va.; Guerrero, A.L.; Leonardo, V. (25%)",
                studyPlan: "Plan. y Gestión Territorial del Turismo (36%)",
                geoArea: "Buenos Aires (70%)",
                methodApproach: "Mixto (82%)",
                scope: "Exploratorio-descriptivo (78%)",
                technique: "Entrevista y encuesta (60%)",
                productivity: {2016:1, 2017:3, 2018:1, 2019:3, 2020:2, 2022:1}
            },
            {
                id: 11,
                name: "Turismo rural y accesibilidad en parques nacionales",
                total: 4,
                percentage: "2%",
                directors: "González, J.; Pinassi, A.; Rodríguez, C.; Vaquero, M.C. (33%)",
                studyPlan: "Plan. y Gestión Territorial del Turismo (33%)",
                geoArea: "La Pampa (67%)",
                methodApproach: "Mixto (75%)",
                scope: "Exploratorio-descriptivo (67%)",
                technique: "Entrevista, revisión documental (100%)",
                productivity: {2014:1, 2015:1, 2022:1, 2024:1}
            },
            {
                id: 12,
                name: "Oferta de turismo rural y urbano",
                total: 38,
                percentage: "17%",
                directors: "Haag, M. I. (29%)",
                studyPlan: "Plan. de Recursos Turísticos y Medio Ambiente (48%)",
                geoArea: "Buenos Aires (64%)",
                methodApproach: "Mixto (63%)",
                scope: "Exploratorio-descriptivo (55%)",
                technique: "Entrevista y encuesta (33%)",
                productivity: {2013:1, 2014:5, 2015:6, 2016:3, 2018:3, 2019:1, 2020:1, 2021:1, 2022:1, 2023:1, 2024:1}
            },
            {
                id: 13,
                name: "Espacios culturales y desarrollo turístico",
                total: 13,
                percentage: "6%",
                directors: "Pinassi, A.; Rosake, P. (20%)",
                studyPlan: "Plan. y Gestión de Empresas Turísticas (50%)",
                geoArea: "Buenos Aires (100%)",
                methodApproach: "Mixto (69%)",
                scope: "Exploratorio-descriptivo (83%)",
                technique: "Entrevista (56%)",
                productivity: {2014:1, 2016:4, 2017:2, 2019:1, 2020:3, 2023:1}
            }
        ];

        // --- LÓGICA DEL TABLERO ---
        document.addEventListener('DOMContentLoaded', () => {
            const selector = document.getElementById('theme-selector');
            const summaryTitle = document.getElementById('summary-title');
            const totalTesis = document.getElementById('total-tesis');
            const totalPercentage = document.getElementById('total-percentage');
            const geoArea = document.getElementById('geo-area');
            const directors = document.getElementById('directors');
            const studyPlan = document.getElementById('study-plan');
            const methodApproach = document.getElementById('method-approach');
            const methodScope = document.getElementById('method-scope');
            const methodTechnique = document.getElementById('method-technique');
            
            // --- Lógica para la línea de tendencia ---
            function calculateTrendline(dataPoints) {
                const filteredPoints = dataPoints.filter(p => p.y !== 0);
                if (filteredPoints.length < 2) {
                    return dataPoints.map(() => null); // No se puede calcular la tendencia con menos de 2 puntos
                }

                const n = filteredPoints.length;
                const sumX = filteredPoints.reduce((acc, p) => acc + p.x, 0);
                const sumY = filteredPoints.reduce((acc, p) => acc + p.y, 0);
                const sumXY = filteredPoints.reduce((acc, p) => acc + p.x * p.y, 0);
                const sumX2 = filteredPoints.reduce((acc, p) => acc + p.x * p.x, 0);

                const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                const intercept = (sumY - slope * sumX) / n;
                
                return dataPoints.map(p => slope * p.x + intercept);
            }

            // Inicializar el gráfico de Chart.js
            const chartCtx = document.getElementById('productivity-chart').getContext('2d');
            let productivityChart = new Chart(chartCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Número de Tesinas',
                            data: [],
                            borderColor: '#3b82f6', // Azul
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#3b82f6',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Línea de Tendencia',
                            data: [],
                            borderColor: '#ef4444', // Rojo
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#475569',
                                stepSize: 1
                            },
                            grid: { color: '#e2e8f0' }
                        },
                        x: {
                            ticks: { color: '#475569' },
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1e293b',
                            titleFont: { size: 14 },
                            bodyFont: { size: 12 },
                            padding: 10,
                            cornerRadius: 4,
                            intersect: false,
                            mode: 'index',
                        }
                    }
                }
            });

            // Función para poblar el selector y los datos
            function populateDashboard(themeId) {
                const data = thematicData.find(item => item.id === themeId);
                if (!data) return;

                // Actualizar tarjetas de texto
                summaryTitle.textContent = data.name;
                totalTesis.textContent = data.total;
                totalPercentage.textContent = data.percentage;
                geoArea.textContent = data.geoArea;
                directors.textContent = data.directors;
                studyPlan.textContent = data.studyPlan;
                methodApproach.textContent = data.methodApproach;
                methodScope.textContent = data.scope;
                methodTechnique.textContent = data.technique;

                // Actualizar gráfico
                const minYear = 2009;
                const maxYear = 2024;
                const allYears = Array.from({length: maxYear - minYear + 1}, (_, i) => minYear + i);
                
                const chartData = allYears.map(year => data.productivity[year] || 0);
                const dataPointsForTrend = allYears.map((year, index) => ({x: index, y: data.productivity[year] || 0}));
                const trendlineData = calculateTrendline(dataPointsForTrend);

                productivityChart.data.labels = allYears;
                productivityChart.data.datasets[0].data = chartData;
                productivityChart.data.datasets[1].data = trendlineData;
                productivityChart.update();
            }

            // Poblar el selector <select>
            thematicData.forEach(theme => {
                const option = document.createElement('option');
                option.value = theme.id;
                option.textContent = `${theme.id} - ${theme.name}`;
                selector.appendChild(option);
            });

            // Event listener para el cambio en el selector
            selector.addEventListener('change', (e) => {
                populateDashboard(parseInt(e.target.value));
            });

            // Cargar datos iniciales (el primer tema)
            populateDashboard(0);
        });
    </script>
    <h5 style="text-align:center; color:#35414d;">Autora: Lic. Badano María Candela</h5>
</body>
</html>
